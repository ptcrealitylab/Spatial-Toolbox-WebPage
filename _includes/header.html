<header class="site-header" role="banner">

  <div class="wrapper">
    {%- assign default_paths = site.pages | map: "path" -%}
    {%- assign page_paths = site.header_pages | default: default_paths -%}

    <nav class="navbar is-dark" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="{{ "/" | relative_url }}">
          <img class="navbar-icon" alt="{{ site.title | escape }}" src="{{ "/resources/vuforia-spatialtoolbox-darkBG.svg" | relative_url }}" height="28"/>
        </a>

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-start">
          {% assign links = site.data.nav %}
          {% for link in links %}
            {% assign class = nil %}
            {% if page.url contains link.url %}
                {% assign class = 'active' %}
            {% endif %}
            {% if link.sublinks %}
              <div class="navbar-item has-dropdown is-hoverable">
                <a href="{{ site.url }}{{ site.baseurl }}{{ link.url }}" class="navbar-link">{{ link.title }}</a>
                <div class="navbar-dropdown">
                  {% for sublink in link.sublinks %}
                    {% if sublink.title == 'separator' %}
                      <hr class="navbar-divider"></hr>
                    {% else %}
                      <a class="navbar-item" href="{{ site.url }}{{ site.baseurl }}{{ sublink.url }}">
                        {{ sublink.title }}
                      </a>

                      {% if sublink.sublinks %}
                        {% for subsublink in sublink.sublinks %}
                      <a class="navbar-item navbar-subitem" href="{{ site.url }}{{ site.baseurl }}{{ subsublink.url }}">
                        {{ subsublink.title }}
                      </a>
                        {% endfor %}

                      {% endif %}
                    {% endif %}
                  {% endfor %}
                </div>
              </div>
            {% else %}
              {% if link.absolute %}
                <a class="navbar-item {{ class }}" href="{{ link.url }}">
                  {{ link.title }}
                </a>
              {% else %}
                <a class="navbar-item {{ class }}" href="{{ site.url }}{{ site.baseurl }}{{ link.url }}">
                  {{ link.title }}
                </a>
              {% endif %}
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </nav>

<!--
      <ul class="nav navbar-nav">
        {% assign links = site.data.nav %}
        {% for link in links %}
          {% assign class = nil %}
          {% if page.url contains link.url %}
              {% assign class = 'active' %}
          {% endif %}
          {% if link.sublinks %}
            <li class="dropdown {{ class }}">
              <a href="{{ site.url }}{{ site.baseurl }}{{ link.url }}" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{ link.title }} <span class="caret"></span></a>
              <ul class="dropdown-menu">
                {% for sublink in link.sublinks %}
                  {% if sublink.title == 'separator' %}
                    <li role="separator" class="divider"></li>
                  {% else %}
                    <li>
                      <a href="{{ site.url }}{{ site.baseurl }}{{ sublink.url }}">{{ sublink.title }}</a>
                    </li>
                  {% endif %}
                {% endfor %}
              </ul>
            </li>
          {% else %}
            <li class="{{ class }}">
              <a href="{{ site.url }}{{ site.baseurl }}{{ link.url }}">{{ link.title }}</a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
-->
    </nav>
  </div>
  <script src="{{ "/assets/bulma-dropdown.js" | relative_url }}"></script>
</header>
